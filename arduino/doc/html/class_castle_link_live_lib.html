<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>CastleLinkLive4Arduino: CastleLinkLiveLib Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CastleLinkLive4Arduino
   </div>
   <div id="projectbrief">An Arduino library to drive Castle Creations ESCs (Electronic Speed Controllers) and get live telemetry data from. Works with CastleLinkLive-enabled ESCs only.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_castle_link_live_lib-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CastleLinkLiveLib Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>CastleLinkLive4Arduino Library Class.  
 <a href="class_castle_link_live_lib.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_castle_link_live_8h_source.html">CastleLinkLive.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa7e233a2bcd817b3f164aeb7c0dc56dd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_castle_link_live_lib.html#aa7e233a2bcd817b3f164aeb7c0dc56dd">CastleLinkLiveLib</a> ()</td></tr>
<tr class="memdesc:aa7e233a2bcd817b3f164aeb7c0dc56dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class constructor. A <a class="el" href="class_castle_link_live_lib.html" title="CastleLinkLive4Arduino Library Class.">CastleLinkLiveLib</a> object named <em>CastleLinkLive</em> <em>is</em> pre-instantiated by the library, so don't call this.  <a href="#aa7e233a2bcd817b3f164aeb7c0dc56dd"></a><br/></td></tr>
<tr class="separator:aa7e233a2bcd817b3f164aeb7c0dc56dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3898a4ae44b3d0dc732cb886f8bea03"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa3898a4ae44b3d0dc732cb886f8bea03"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_castle_link_live_lib.html#aa3898a4ae44b3d0dc732cb886f8bea03">init</a> ()</td></tr>
<tr class="memdesc:aa3898a4ae44b3d0dc732cb886f8bea03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization function: should be called during program setup and before any call to "begin(...)". <br/></td></tr>
<tr class="separator:aa3898a4ae44b3d0dc732cb886f8bea03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9264aa0e854176187eaffff3af7d673a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_castle_link_live_lib.html#a9264aa0e854176187eaffff3af7d673a">begin</a> ()</td></tr>
<tr class="memdesc:a9264aa0e854176187eaffff3af7d673a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the library with default configuration Default configuration is:  <a href="#a9264aa0e854176187eaffff3af7d673a"></a><br/></td></tr>
<tr class="separator:a9264aa0e854176187eaffff3af7d673a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68097f8c2b18235d2feaf1f82ba21f38"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_castle_link_live_lib.html#a68097f8c2b18235d2feaf1f82ba21f38">begin</a> (uint8_t nESC)</td></tr>
<tr class="memdesc:a68097f8c2b18235d2feaf1f82ba21f38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the library indicating the number of ESC connected Throttle signal will be software generated by the library.  <a href="#a68097f8c2b18235d2feaf1f82ba21f38"></a><br/></td></tr>
<tr class="separator:a68097f8c2b18235d2feaf1f82ba21f38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1055e01f50b828d92234f13ca4f485a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_castle_link_live_lib.html#ac1055e01f50b828d92234f13ca4f485a">begin</a> (uint8_t nESC, int throttlePinNumber)</td></tr>
<tr class="memdesc:ac1055e01f50b828d92234f13ca4f485a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the library indicating the number of ESC connected and the arduino pin that will be used to read throttle signal.  <a href="#ac1055e01f50b828d92234f13ca4f485a"></a><br/></td></tr>
<tr class="separator:ac1055e01f50b828d92234f13ca4f485a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e5e093dfc73b428350c7d45b45d9c2b"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_castle_link_live_lib.html#a1e5e093dfc73b428350c7d45b45d9c2b">begin</a> (uint8_t nESC, int throttlePinNumber, uint16_t throttleMin, uint16_t throttleMax)</td></tr>
<tr class="memdesc:a1e5e093dfc73b428350c7d45b45d9c2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the library indicating the number of ESC connected, the arduino pin that will be used to read throttle signal, minimum and maximum pulse duration for throttle signal.  <a href="#a1e5e093dfc73b428350c7d45b45d9c2b"></a><br/></td></tr>
<tr class="separator:a1e5e093dfc73b428350c7d45b45d9c2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3613d3b67a5c6e1a38c94321d35e46a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_castle_link_live_lib.html#a3613d3b67a5c6e1a38c94321d35e46a4">setThrottle</a> (uint8_t throttle)</td></tr>
<tr class="memdesc:a3613d3b67a5c6e1a38c94321d35e46a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets throttle value to drive the ESC(s) when in software generated throttle.  <a href="#a3613d3b67a5c6e1a38c94321d35e46a4"></a><br/></td></tr>
<tr class="separator:a3613d3b67a5c6e1a38c94321d35e46a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69b884141a299565e77c2f295002f39b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_castle_link_live_lib.html#a69b884141a299565e77c2f295002f39b">throttleArm</a> ()</td></tr>
<tr class="memdesc:a69b884141a299565e77c2f295002f39b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arms the throttle on the library.  <a href="#a69b884141a299565e77c2f295002f39b"></a><br/></td></tr>
<tr class="separator:a69b884141a299565e77c2f295002f39b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af36aacfd2391a893fef8331613ecccbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_castle_link_live_lib.html#af36aacfd2391a893fef8331613ecccbe">throttleDisarm</a> ()</td></tr>
<tr class="memdesc:af36aacfd2391a893fef8331613ecccbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disarms the throttle on the library.  <a href="#af36aacfd2391a893fef8331613ecccbe"></a><br/></td></tr>
<tr class="separator:af36aacfd2391a893fef8331613ecccbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60c777f783011068d3afc8374f47d44f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_castle_link_live_lib.html#a60c777f783011068d3afc8374f47d44f">attachThrottlePresenceHandler</a> (void(*ptHandler)(uint8_t))</td></tr>
<tr class="memdesc:a60c777f783011068d3afc8374f47d44f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attach a program-defined function to be called by the libray whenever it detects throttle signal failure/recovery.  <a href="#a60c777f783011068d3afc8374f47d44f"></a><br/></td></tr>
<tr class="separator:a60c777f783011068d3afc8374f47d44f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7d2a0b407e6fee4b3b6928ec6bacd39"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_castle_link_live_lib.html#aa7d2a0b407e6fee4b3b6928ec6bacd39">getData</a> (uint8_t index, <a class="el" href="_castle_link_live_8h.html#abb555f22f0bfbdaf762cdcbe9a06154f">CASTLE_ESC_DATA</a> *dataHolder)</td></tr>
<tr class="memdesc:aa7d2a0b407e6fee4b3b6928ec6bacd39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets human-readable parsed data for the index-ESC from the library. This data is calculated by time-measurements contained in a CASTLE_RAW_DATA, as detailed in following source code.  <a href="#aa7d2a0b407e6fee4b3b6928ec6bacd39"></a><br/></td></tr>
<tr class="separator:aa7d2a0b407e6fee4b3b6928ec6bacd39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9584b80fe22a91ff138e975da4fcf6a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_castle_link_live_lib.html#ad9584b80fe22a91ff138e975da4fcf6a">getData</a> (uint8_t index, <a class="el" href="_castle_link_live_8h.html#a362767d6666941c04ecc00629ceababb">CASTLE_RAW_DATA</a> *dataHolder)</td></tr>
<tr class="memdesc:ad9584b80fe22a91ff138e975da4fcf6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets raw data (time measurements) for the index-ESC from the library.  <a href="#ad9584b80fe22a91ff138e975da4fcf6a"></a><br/></td></tr>
<tr class="separator:ad9584b80fe22a91ff138e975da4fcf6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>CastleLinkLive4Arduino Library Class. </p>
<p>The library purpose is to get live telemetry data from Castle Creations ESCs with CastleLinkLive protocol available and enabled (version 2.0).</p>
<dl class="section warning"><dt>Warning</dt><dd>SAFETY NOTICE Always keep in mind that an electric motor can be dangerous for you, for people and for things. It can start at any time if there is power. Castle Creations ESC are very good ones, and have many security strategies to avoid accidental and unwanted motor start. CastleLinkLive library also try to keep things as safe as possible, but using them together with an Arduino (or similar) board connected to an electric power system adds another possible point of failure to your motor control chain. So please stay always on the safe side. If you have any doubts, ask other modelers to help. It's your responsibility to keep things safe. Developers of this software can't be considered liable for any possible damage will result from its use.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Matteo Piscitelli </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2012 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Matteo Piscitelli </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa7e233a2bcd817b3f164aeb7c0dc56dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CastleLinkLiveLib::CastleLinkLiveLib </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Class constructor. A <a class="el" href="class_castle_link_live_lib.html" title="CastleLinkLive4Arduino Library Class.">CastleLinkLiveLib</a> object named <em>CastleLinkLive</em> <em>is</em> pre-instantiated by the library, so don't call this. </p>
<p>Instead, in your program use directly the CastleLinkLive variable as in following code snippet:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  &lt; program specific setup code &gt;</div>
<div class="line">  CastleLinkLive.<a class="code" href="class_castle_link_live_lib.html#aa3898a4ae44b3d0dc732cb886f8bea03" title="Initialization function: should be called during program setup and before any call to &quot;begin(...">init</a>();</div>
<div class="line">  CastleLinkLive.<a class="code" href="class_castle_link_live_lib.html#a9264aa0e854176187eaffff3af7d673a" title="Starts the library with default configuration Default configuration is:">begin</a>(1, <a class="code" href="_castle_link_live_8h.html#a94b6d2a2155ac43b638a98a55d48d41a">GENERATE_THROTTLE</a>); </div>
<div class="line">  ...</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a60c777f783011068d3afc8374f47d44f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CastleLinkLiveLib::attachThrottlePresenceHandler </td>
          <td>(</td>
          <td class="paramtype">void(*)(uint8_t)&#160;</td>
          <td class="paramname"><em>ptHandler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attach a program-defined function to be called by the libray whenever it detects throttle signal failure/recovery. </p>
<p>Function has to be void and accept only one parameter, which specifies if throttle is present and valid or not.</p>
<p>Sample prototype: </p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> throttleEvent(<span class="keywordtype">boolean</span> valid)</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a9264aa0e854176187eaffff3af7d673a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t CastleLinkLiveLib::begin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the library with default configuration Default configuration is: </p>
<ul>
<li>1 ESC connected</li>
<li>Software (library) generated throttle signal </li>
</ul>

</div>
</div>
<a class="anchor" id="a68097f8c2b18235d2feaf1f82ba21f38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t CastleLinkLiveLib::begin </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>nESC</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the library indicating the number of ESC connected Throttle signal will be software generated by the library. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nESC</td><td>the number of ESC(s) connected (up to 2) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac1055e01f50b828d92234f13ca4f485a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t CastleLinkLiveLib::begin </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>nESC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>throttlePinNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the library indicating the number of ESC connected and the arduino pin that will be used to read throttle signal. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nESC</td><td>the number of ESC(s) connected (up to 2) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">throttlePinNumber</td><td>any valid Arduino pin (except the already used ones) or GENERATE_THROTTLE macro to let the library generate the throttle signal itself. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="_castle_link_live_8h.html#a94b6d2a2155ac43b638a98a55d48d41a">GENERATE_THROTTLE</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a1e5e093dfc73b428350c7d45b45d9c2b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t CastleLinkLiveLib::begin </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>nESC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>throttlePinNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>throttleMin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>throttleMax</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the library indicating the number of ESC connected, the arduino pin that will be used to read throttle signal, minimum and maximum pulse duration for throttle signal. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nESC</td><td>the number of ESC(s) connected (up to 2) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">throttlePinNumber</td><td>any valid Arduino pin (except the already used ones) or GENERATE_THROTTLE macro to let the library generate the throttle signal itself. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">throttleMin</td><td>specifies throttle signal pulse duration corresponding to idle/brake (in microseconds: default value is 1000, and can be changed in <a class="el" href="_castle_link_live__config_8h.html" title="Global library compile-time configurations.">CastleLinkLive_config.h</a>). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">throttleMax</td><td>specifies throttle signal pulse duration corresponding to full throttle (in microseconds: default value is 2000, and can be changed in <a class="el" href="_castle_link_live__config_8h.html" title="Global library compile-time configurations.">CastleLinkLive_config.h</a>). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa7d2a0b407e6fee4b3b6928ec6bacd39"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t CastleLinkLiveLib::getData </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_castle_link_live_8h.html#abb555f22f0bfbdaf762cdcbe9a06154f">CASTLE_ESC_DATA</a> *&#160;</td>
          <td class="paramname"><em>dataHolder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets human-readable parsed data for the index-ESC from the library. This data is calculated by time-measurements contained in a CASTLE_RAW_DATA, as detailed in following source code. </p>
<p>[ESC data calculation details]</p>
<div class="fragment"><div class="line">uint8_t <a class="code" href="class_castle_link_live_lib.html#aa7d2a0b407e6fee4b3b6928ec6bacd39" title="Gets human-readable parsed data for the index-ESC from the library. This data is calculated by time-m...">CastleLinkLiveLib::getData</a>( uint8_t index, <a class="code" href="structcastle__esc__data__struct.html" title="Structure to hold ESC telemetry data.">CASTLE_ESC_DATA</a> *o) {</div>
<div class="line">  uint16_t refTicks;</div>
<div class="line">  uint16_t offTicks;</div>
<div class="line">  uint16_t ticks;</div>
<div class="line">  uint8_t whichTemp;</div>
<div class="line">  <span class="keywordtype">float</span> value;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="structcastle__raw__data__struct.html" title="Structure for ESC telemetry data time measurements.">CASTLE_RAW_DATA</a> c;</div>
<div class="line">  </div>
<div class="line">  c.<a class="code" href="structcastle__raw__data__struct.html#aeb86ffc9059aa82bf4972b62878c82d8" title="Array containing time (timer ticks) measurements for all ESC data frames.">ticks</a>[<a class="code" href="_castle_link_live_8h.html#acae707a6eaeb06e9ee0fae0857214237" title="frame identifier for reference-time frame">FRAME_REFERENCE</a>] = 0;</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">if</span> (! _copyDataStructure(index, &amp;c)) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">//data was not ready</span></div>
<div class="line">  </div>
<div class="line">  refTicks = c.<a class="code" href="structcastle__raw__data__struct.html#aeb86ffc9059aa82bf4972b62878c82d8" title="Array containing time (timer ticks) measurements for all ESC data frames.">ticks</a>[<a class="code" href="_castle_link_live_8h.html#acae707a6eaeb06e9ee0fae0857214237" title="frame identifier for reference-time frame">FRAME_REFERENCE</a>];</div>
<div class="line">  <span class="keywordflow">if</span> (c.<a class="code" href="structcastle__raw__data__struct.html#aeb86ffc9059aa82bf4972b62878c82d8" title="Array containing time (timer ticks) measurements for all ESC data frames.">ticks</a>[<a class="code" href="_castle_link_live_8h.html#a44d61ed1318c0ac54bd5db471e646abd" title="frame identifier for temperature1 frame">FRAME_TEMP1</a>] &lt; c.<a class="code" href="structcastle__raw__data__struct.html#aeb86ffc9059aa82bf4972b62878c82d8" title="Array containing time (timer ticks) measurements for all ESC data frames.">ticks</a>[<a class="code" href="_castle_link_live_8h.html#aadf33ce68a04dff8a41bdf0669648588" title="frame identifier for temperature2 frame">FRAME_TEMP2</a>]) {</div>
<div class="line">    offTicks = c.<a class="code" href="structcastle__raw__data__struct.html#aeb86ffc9059aa82bf4972b62878c82d8" title="Array containing time (timer ticks) measurements for all ESC data frames.">ticks</a>[<a class="code" href="_castle_link_live_8h.html#a44d61ed1318c0ac54bd5db471e646abd" title="frame identifier for temperature1 frame">FRAME_TEMP1</a>];</div>
<div class="line">    whichTemp = <a class="code" href="_castle_link_live_8h.html#aadf33ce68a04dff8a41bdf0669648588" title="frame identifier for temperature2 frame">FRAME_TEMP2</a>;</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    offTicks = c.<a class="code" href="structcastle__raw__data__struct.html#aeb86ffc9059aa82bf4972b62878c82d8" title="Array containing time (timer ticks) measurements for all ESC data frames.">ticks</a>[<a class="code" href="_castle_link_live_8h.html#aadf33ce68a04dff8a41bdf0669648588" title="frame identifier for temperature2 frame">FRAME_TEMP2</a>];    </div>
<div class="line">    whichTemp = <a class="code" href="_castle_link_live_8h.html#a44d61ed1318c0ac54bd5db471e646abd" title="frame identifier for temperature1 frame">FRAME_TEMP1</a>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (refTicks == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">//data was not ready</span></div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f = 1; f &lt; <a class="code" href="_castle_link_live_8h.html#a0cabacf5d0bc47a457d3451ecc1d27c0" title="number of data frames (not counting the reset frame)">DATA_FRAME_CNT</a>; f++) {</div>
<div class="line">    ticks = c.<a class="code" href="structcastle__raw__data__struct.html#aeb86ffc9059aa82bf4972b62878c82d8" title="Array containing time (timer ticks) measurements for all ESC data frames.">ticks</a>[f] - offTicks;</div>
<div class="line">    </div>
<div class="line">    value = ((float) ticks) / ((float) refTicks);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">switch</span>(f) {</div>
<div class="line">      <span class="keywordflow">case</span> <a class="code" href="_castle_link_live_8h.html#aebd40893cb8c946357e58f6d699a2592" title="frame identifier for voltage frame">FRAME_VOLTAGE</a>:</div>
<div class="line">        o-&gt;<a class="code" href="structcastle__esc__data__struct.html#ab8bbb24e5398b5ee090ec65c6f44e596" title="Battery voltage in Volts.">voltage</a> = value * 20.0f;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <a class="code" href="_castle_link_live_8h.html#ab797ea14c79561e026a1e76cb6c1dc17" title="frame identifier for ripple frame">FRAME_RIPPLE_VOLTAGE</a>:</div>
<div class="line">        o-&gt;<a class="code" href="structcastle__esc__data__struct.html#a41253aa24afe00af33f1097d49556c1f" title="Ripple voltage in Volts.">rippleVoltage</a> = value * 4.0f;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <a class="code" href="_castle_link_live_8h.html#aabc87e87a456e34a2de044025d8203ac" title="frame identifier for current frame">FRAME_CURRENT</a>:</div>
<div class="line">        o-&gt;<a class="code" href="structcastle__esc__data__struct.html#a83b6dbef6b60467d636a232d532c97bb" title="Current drawn by motor in Amperes.">current</a> = value * 50.0f;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <a class="code" href="_castle_link_live_8h.html#a01ea1f9bfa31897150dd25856305aeb8" title="frame identifier for throttle frame">FRAME_THROTTLE</a>:</div>
<div class="line">        o-&gt;<a class="code" href="structcastle__esc__data__struct.html#a0be440ab22d9da73d053fee0e0adc3aa" title="throttle pulse duration as seen by the ESC (in milliseconds)">throttle</a> = value;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <a class="code" href="_castle_link_live_8h.html#a7b9799b8fd95319229fa41dd71b89087" title="frame identifier for output power frame">FRAME_OUTPUT_POWER</a>:</div>
<div class="line">        o-&gt;<a class="code" href="structcastle__esc__data__struct.html#a596999f507035912e5f96c572471dca0" title="power level the ESC is driving the motor with. Value goes from 0.0 for idle to 1.0 for full throttle...">outputPower</a> = value * 0.2502f;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <a class="code" href="_castle_link_live_8h.html#a55c237a72536ae8c244b4726c6deb208" title="frame identifier for rpm frame">FRAME_RPM</a>:</div>
<div class="line">        o-&gt;<a class="code" href="structcastle__esc__data__struct.html#ac4aa6fdc022eeb02021d43d4c01cb52a" title="Round per minutes the motor is spinning at. Keep in mind that this values represents ELECTRICAL rpm...">RPM</a> = value * 20416.7f;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <a class="code" href="_castle_link_live_8h.html#a16374dcfa857f194f02c8a946a6fb415" title="frame identifier for BEC voltage frame">FRAME_BEC_VOLTAGE</a>:</div>
<div class="line">        o-&gt;<a class="code" href="structcastle__esc__data__struct.html#ad42a6a5542f60c517a76f2e14f3f1cc8" title="Voltage at the BEC (Battery Eliminator Circuit) in Volts.">BECvoltage</a> = value * 4.0f;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <a class="code" href="_castle_link_live_8h.html#a5c5f7e38cb94027a417d4f1019fb37c2" title="frame identifier for BEC current frame">FRAME_BEC_CURRENT</a>:</div>
<div class="line">        o-&gt;<a class="code" href="structcastle__esc__data__struct.html#aa1a87f6748a24beb5b45e117cefbb382" title="Current drawn by servos and any other device powered by the BEC in Amperes.">BECcurrent</a> = value * 4.0f;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <a class="code" href="_castle_link_live_8h.html#a44d61ed1318c0ac54bd5db471e646abd" title="frame identifier for temperature1 frame">FRAME_TEMP1</a>:</div>
<div class="line">        <span class="keywordflow">if</span> (whichTemp == <a class="code" href="_castle_link_live_8h.html#a44d61ed1318c0ac54bd5db471e646abd" title="frame identifier for temperature1 frame">FRAME_TEMP1</a>) o-&gt;<a class="code" href="structcastle__esc__data__struct.html#a4faf5ff0137be8192c8d481fe4e3c8e4" title="Temperature of the ESC in degree Celsius.">temperature</a> = value * 30.0f;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> <a class="code" href="_castle_link_live_8h.html#aadf33ce68a04dff8a41bdf0669648588" title="frame identifier for temperature2 frame">FRAME_TEMP2</a>:</div>
<div class="line">        <span class="keywordflow">if</span> (whichTemp == <a class="code" href="_castle_link_live_8h.html#aadf33ce68a04dff8a41bdf0669648588" title="frame identifier for temperature2 frame">FRAME_TEMP2</a>) {</div>
<div class="line">           <span class="keywordflow">if</span> (value &gt; 3.9f)</div>
<div class="line">             o-&gt;<a class="code" href="structcastle__esc__data__struct.html#a4faf5ff0137be8192c8d481fe4e3c8e4" title="Temperature of the ESC in degree Celsius.">temperature</a> = -40;</div>
<div class="line">           <span class="keywordflow">else</span> {</div>
<div class="line">             <span class="keywordtype">float</span> v = value * 63.8125f;</div>
<div class="line">             o-&gt;<a class="code" href="structcastle__esc__data__struct.html#a4faf5ff0137be8192c8d481fe4e3c8e4" title="Temperature of the ESC in degree Celsius.">temperature</a> = 1.0f / (log(v * 10200.0f / (255 - v) / 10000.0f) / 3455.0f + 1.0f / 298.0f) - 273;</div>
<div class="line">           }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>indicates which ESC we want data for. First ESC index is 0 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dataHolder</td><td>is a pointer to a CASTLE_ESC_DATA structure to receive the data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if data is not available, or a positive number otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ad9584b80fe22a91ff138e975da4fcf6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t CastleLinkLiveLib::getData </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_castle_link_live_8h.html#a362767d6666941c04ecc00629ceababb">CASTLE_RAW_DATA</a> *&#160;</td>
          <td class="paramname"><em>dataHolder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets raw data (time measurements) for the index-ESC from the library. </p>
<p>[ESC data calculation details]</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>indicates which ESC we want data for. First ESC index is 0 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dataHolder</td><td>is a pointer to a CASTLE_RAW_DATA structure to receive the data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if data is not available, or a positive number otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a3613d3b67a5c6e1a38c94321d35e46a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CastleLinkLiveLib::setThrottle </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>throttle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets throttle value to drive the ESC(s) when in software generated throttle. </p>
<p>Sets throttle value to drive the ESC(s) when in software generated throttle Beware that, when software generating throttle, as a safety measure, CastleLinkLive library expects throttle to be continuosly set at a rate faster than ~1 Hz (1 time per second); failure to do so will result in CastleLinkLive to stop generating throttle signal and raising throttle failure event until setThrottle is called again. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="class_castle_link_live_lib.html#a9264aa0e854176187eaffff3af7d673a" title="Starts the library with default configuration Default configuration is:">begin</a> </dd>
<dd>
<a class="el" href="class_castle_link_live_lib.html#a60c777f783011068d3afc8374f47d44f" title="Attach a program-defined function to be called by the libray whenever it detects throttle signal fail...">attachThrottlePresenceHandler</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">throttle</td><td>the throttle level the library should drive the ESC(s) at, ranging from 0 (idle/brake) to 100 (full throttle). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a69b884141a299565e77c2f295002f39b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CastleLinkLiveLib::throttleArm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Arms the throttle on the library. </p>
<p>Until armed, the library will not generate throttle signals (in software generated mode) nor bypass external throttle signal (in external throttle mode): basically, until the library is armed, ESC(s) will not receive any throttle signal </p>

</div>
</div>
<a class="anchor" id="af36aacfd2391a893fef8331613ecccbe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CastleLinkLiveLib::throttleDisarm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disarms the throttle on the library. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="class_castle_link_live_lib.html#a69b884141a299565e77c2f295002f39b" title="Arms the throttle on the library.">throttleArm</a> </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>CastleLinkLive/<a class="el" href="_castle_link_live_8h_source.html">CastleLinkLive.h</a></li>
<li>CastleLinkLive/CastleLinkLive.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 12 2012 21:03:26 for CastleLinkLive4Arduino by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
